# Exercises

## Storage

1. Make a deployment based on the latest version of Nginx that has a persistent
   volume claim for 1 Gi of local Storage, mounted at `/var/lib/nginx/html`. It
   should use the Storage class named "local-storage".
   1. Once the volume has
      successfully mounted place a file there named index.html with content:
      ```html
       <!DOCTYPE html>
       <html lang="en">
           <head>
               <meta charset="UTF-8" />
               <title></title>
           </head>
           <body>
               <div>AsSalamu'laykum</div>
           </body>
       </html>
      ```
   2. Retrieve the node port assigned to the `nginx-dp1-svc` service:
      ```bash
      NODE_PORT=$(kubectl get svc nginx-dp1-svc \
        -o jsonpath='{range .spec.ports[0]}{.nodePort}')
      ```
   3. Retrieve the hostname of the node running the `nginx` pod:
      ```bash
      NODE_NAME=$(kubectl get pods \
        -l app=nginx \
        -o jsonpath="{.items[0].spec.nodeName}")
      ```
   4. Make an HTTP request using the IP address and the `nginx` node port:
      ```bash
      curl http://${NODE_NAME}:${NODE_PORT}/local-storage/index.html
      ```
   5. Destroy the deployment `kubectl delete deployment nginx-dp1`.
2. Store HTML in a ConfigMap and mount it into an NginX container as the index.html.