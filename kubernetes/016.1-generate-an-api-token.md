# Guides: Generate an API Token

This guide walks you through the process of generating an API token. This is
an alterative to using a certificate for authentication.

To generate an API token for the current context of the user for a Kubernetes
cluster, you can follow these steps:

1. **Create a Service Account**:
   Create a service account in your desired namespace. For example:

   ```bash
   kubectl create serviceaccount my-service-account
   ```

2. **Bind the Service Account to a Role**:
   You need to bind the service account to a role that has the necessary
   permissions. Here's an example of how to create a ClusterRoleBinding:

   ```bash
   kubectl create clusterrolebinding my-service-account-binding \
     --clusterrole=cluster-admin \
     --serviceaccount=default:my-service-account
   ```

3. **Retrieve the Service Account Token**:
   Get the name of the secret associated with the service account:

   ```bash
   kubectl get secrets
   ```

   Look for a secret with a name that includes "my-service-account". Then, describe the secret to get the token:

   ```bash
   kubectl describe secret my-service-account-token-xxxx
   ```

   You'll find the `token` field in the output, which contains the API token.

4. **Set the Context to Use the Token**:
   Update the Kubernetes context to use the new service account token. First, get the current context name:

   ```bash
   kubectl config current-context
   ```

   Then, set the user credentials in the current context to use the token:

   ```bash
   kubectl config set-credentials my-user --token=YOUR_TOKEN
   ```

   Replace `YOUR_TOKEN` with the actual token value.

5. **Update the Context with the User**:
   Finally, update the context to use the new user:

   ```bash
   kubectl config set-context $(kubectl config current-context) --user=my-user
   ```
