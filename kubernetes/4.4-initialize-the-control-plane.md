# Initialize the Control Plane

Time to start the kubelet service on the control plane which, in turn, will
start the control plane components using their manifest located in
`/etc/kubernetes/manifest`.

NOTE: This process avoids the [TLS bootstrapping] process for the sake of
brevity.

1. Make a configuration for the `kubelet`:
   1. Copy the `samples/config.yaml` over to the `control-plane-01`.
   2. Move the `config.yaml` to `/var/lib/kubelet` directory:
      ```shell
      sudo mkdir -p /var/lib/kubelet
      sudo cp config.yaml /var/lib/kubelet
      ```
2. Customize the `systemd` unit for the `kubelet.service` by specifying the
   kubelet configuration file and the bootstrap kubeconfig file.
   ```shell
   sudo mkdir -p /etc/systemd/system/kubelet.service.d
   cat <<'TXT' | sudo tee /etc/systemd/system/kubelet.service.d/kubelet.conf
   [Service]
   Environment="KUBELET_KUBECONFIG_ARGS=--kubeconfig=/etc/kubernetes/kubelet.conf"
   Environment="KUBELET_CONFIG_ARGS=--config=/var/lib/kubelet/config.yaml"
   # This is a file that can be used to override kubelet CLI args set in the unit file installed with the package.
   # Or you can set KUBELET_EXTRA_ARGS, which should be sourced from this file.
   EnvironmentFile=-/etc/default/kubelet
   ExecStart=
   ExecStart=/usr/bin/kubelet $KUBELET_KUBECONFIG_ARGS $KUBELET_CONFIG_ARGS $KUBELET_EXTRA_ARGS
   TXT
   ```
3. Copy the kublet key and certificate, and kubeconfig into place.
   ```shell
   sudo mkdir -p /var/lib/kubelet/pki
   sudo cp ~/certs/control-plane-01.key /var/lib/kubelet/pki/kubelet.key
   sudo cp ~/certs/control-plane-01.crt /var/lib/kubelet/pki/kubelet.crt
   sudo cp ~/certs/control-plane-01.conf /etc/kubernetes/kubelet.conf
   ```
4. Start the cluster components.
   ```shell
   sudo systemctl daemon-reload
   sudo systemctl start kubelet.service
   ```
5. Then check the status of the kubelet to make sure it booted successfully.
   ```shell
   sudo systemctl status kubelet.service
   ```

NOTE: If your having issues you can review the kubelet logs with
`sudo journalctl -u kubelet.service`.

Next: [Configure Networking]

---

[TLS bootstrapping]: https://kubernetes.io/docs/reference/access-authn-authz/kubelet-tls-bootstrapping
[Configure Networking]: /kubernetes/4.5-configure-networking.md
