# Rejoin Node

There was an issue where the kubelet did not detect both IPs for a node.

The fix was this:

1. Drain the node: `sudo kubectl drain <node-name> --ignore-daemonset`.
2. login to the node and reset the node: `kubeadm reset`.
3. Clean up IP tables on the node you are removing:
   ```shell
   iptables -F && iptables -t nat -F && iptables -t mangle -F && iptables -X
   ```
4. Reset the IPVS tables: `ipvsadm -C`
4. Delete the node: `kubectl delete nodes <node-name>`.
5. Login to the new fix the issues with the `kubelet` configuration. The reload
   it `sudo systemctl daemon-reload`
6. Restart the `kubelet` service `sudo systemctl restart kubelet.service`
7. Then join the node to the cluster:
   `sudo kubeadm join --config kubeadm-join-config.yaml`.