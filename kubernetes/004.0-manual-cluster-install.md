# Manual Cluster Install

Though I first leaned how to manually install a cluster with
[Kubernetes The Hard Way], I wanted to comply with current standards. So this
manual process is based on `kubeadm` [Implementation details]. This means that
installation directories, configurations, and PKI should be relatively identical
to that of which `kubeadm` deploys. This helps transition from manual to a tool
assisted installation smoother. Here are the steps you'll need to perform.

1. Prepare the machines for cluster installation by following the
   [Setup A Virtual Environment] guide, then return back here.
2. On each machine:
   1. [Install containerd: Manual Installation] as the CRI of choice.
   2. [Install Kubernetes Packages]
3. Choose IP CIDR ranges for the Pod and Service networks. This is a Dualstack
   set up so both IPv4 and IPv6 are required. While you can pick any routable
   CIDRs you want, for brevity, use the ones provided in the Kubernetes docs.
   ```text
   IPv4 POD network:     10.244.0.0/16
   IPv4 Service Network: 10.96.0.0/16
   IPv6 POD network:     2001:db8:42:0::/56
   IPv6 Service Network: 2001:db8:42:1::/112
   ```
   NOTE: Feel free to choose other CIDRs you want, and if it breaks just
   remember that is more troubleshooting to benefit your learning.
4. Set up the `control-plane-01`:
   1. [Generate Control Plane Certificates Manually],
   2. [Generate Control Plane kubeconfigs Manually],
   3. [Generate Static Pod Manifests],
   4. [Initialize the Control Plane]
   5. [Configure Networking].
5. [Add Workers].

Next: [Generate Control Plane Certificates Manually]

---

[Kubernetes The Hard Way]: https://github.com/kelseyhightower/kubernetes-the-hard-way
[Constants and well-known values and paths]: https://kubernetes.io/docs/reference/setup-tools/kubeadm/implementation-details/#constants-and-well-known-values-and-paths
[Implementation details]: https://kubernetes.io/docs/reference/setup-tools/kubeadm/implementation-details/#constants-and-well-known-values-and-paths
[Generate Control Plane kubeconfigs Manually]: /kubernetes/004.2-generate-control-plane-kubeconfigs-manually.md
[Generate Static Pod Manifests]: /kubernetes/004.3-generate-static-pod-manifests.md
[Configure Networking]: /kubernetes/004.5-configure-networking.md
[Add Workers]: /kubernetes/004.6-add-workers.md
[Setup A Virtual Environment]: /kubernetes/002.0-setup-a-virtual-environment.md
[Install containerd: Manual Installation]: /kubernetes/003.0-install-containerd.md
[Generate Control Plane Certificates Manually]: /kubernetes/004.1-generate-control-plane-certificates-manually.md
[Initialize the Control Plane]: /kubernetes/004.4-initialize-the-control-plane.md
[Install Kubernetes Packages]: /kubernetes/003.1-install-kubernetes-packages.md
