# Guides: Add Additional Control Plane

## Manually

We want to practice making a cluster Highly-available the manual way.

We have an existing cluster setup with kubeadm. Now we are going to turn our
jump-box into an additional control-plane-02.

1. Edit the [Vagrantfile] and find the jump-box configuration, then change
2. `vb.memory = 2048`, then save the file.
3. If one is not open already, open a terminal and cd to the directory where
   the vagrantfile is located and run `vagrant reload` to make the memory
   adjustment. Wait until it completes.
4. Log into the jump-box with `vagrant ssh jump-box`.
5. Same as with other machines, we use the [Setup A Virtual Environment] guide.
6. Then [Install containerd: Ubuntu Package Manager] as the CRI of choice.
7. Add the clusters control plane endpoint DNS to the hosts file: 
   `echo "192.168.56.11 control-plane-01" | sudo tee -a /etc/hosts`.

   NOTE: you may need to look up the IP address of `control-plane-01` by
   running `ip address` and finding IP of the NAT interface.
8. [Set Up Software Load Balancing] on the control-plane-01.
9. [Generate Certificates Manually].

## Tool Assisted

`kubeadm join --control-plane`
```shell
kubeadm join controlplane:6443 --control-plane \
  --token 6nbtea.sinvphy1f86ifb29 \
  --discovery-token-ca-cert-hash sha256:652ff33ae663beea1440297393d0c71c2c94df0195ad5fbded514c8a031d7312 \
  --certificate-key 484b1eb9a32660f0ee0bac177e986c50e5f4467b884a5aedb38c8c3d8e13213c
```
---

[Generate Certificates Manually]: https://kubernetes.io/docs/tasks/administer-cluster/certificates/
[Set Up Software Load Balancing]: /kubernetes/016.x-setup-software-load-balancing.md
