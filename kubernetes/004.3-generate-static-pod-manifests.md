# Generate Static Pod Manifests

1. Set the following environment variables on `control-plane-01`.
   ```shell
   getIps () {
      iface=${1}
      export IPV4=$(ip -4 addr show scope global dev ${iface} | grep "inet\b" | awk '{print $2}' | cut -d/ -f1)
      export IPV6=$(ip -6 addr show scope global dev ${iface} | grep "inet6\b" | awk '{print $2}' | cut -d/ -f1)
   }
   getIps "enp0s8"
   export ADVERTISE_ADDRESS=${IPV4}
   export POD_CIDRS=10.244.0.0/16,2001:db8:42:0::/56
   export SERVICE_CIDRS=10.96.0.0/16,2001:db8:42:1::/112
   export KUBE_VER=v1.33.3
   export HOSTNAME=$(hostname)
   sudo mkdir -p /etc/kubernetes/manifests/
   mkdir -p ~/manifests
   cd ~/manifests
   cp /vagrant/*.yaml.tmpl .
   ```
2. Copy the yaml files to `control-plane-01`.
   ```shell
   envsubst < etcd.yaml.tmpl | sudo tee /etc/kubernetes/manifests/etcd.yaml
   envsubst < kube-apiserver.yaml.tmpl | sudo tee /etc/kubernetes/manifests/kube-apiserver.yaml
   envsubst < kube-controller-manager.yaml.tmpl | sudo tee /etc/kubernetes/manifests/kube-controller-manager.yaml
   envsubst < kube-scheduler.yaml.tmpl | sudo tee /etc/kubernetes/manifests/kube-scheduler.yaml
   ```

Next: [Initialize the Control Plane]

---

[Initialize the Control Plane]: /kubernetes/004.4-initialize-the-control-plane.md
