# Add Workers

1. Now we'll use SSH to remotely run the following commands on each worker:
   NOTE: If you are in the Cloud remember to add security groups that allow
   traffic over port 6443 inbound to every node.
   ```shell
   cd ~/certs
   nodes=("worker-01" "worker-02")
   for i in ${nodes[*]}
   do
       # Make several directories on each node.
       ssh ${i} sudo mkdir -p /etc/kubernetes/{pki,manifests} \
         /var/lib/kubelet/pki \
         /etc/systemd/system/kubelet.service.d
       # Copy the node specific kubelet certificate and key over to the worker.
       sudo cat ${i}.key | ssh ${i} sudo tee /var/lib/kubelet/pki/kubelet.key
       sudo cat ${i}.crt | ssh ${i} sudo tee /var/lib/kubelet/pki/kubelet.crt
       # Copy the kubelet configuration to each node.
       sudo cat /var/lib/kubelet/config.yaml | ssh ${i} sudo tee /var/lib/kubelet/config.yaml
       # Copy the cluster CA certificate.
       sudo cat /etc/kubernetes/pki/ca.crt | ssh ${i} sudo tee /etc/kubernetes/pki/ca.crt
       # Copy the node specific kubelet kubeconfig over.
       sudo cat ${i}.conf | ssh ${i} sudo tee /etc/kubernetes/kubelet.conf
       # Copy the kube-proxy kubeconfig.
       sudo cat /etc/kubernetes/kube-proxy.conf | ssh ${i} sudo tee /etc/kubernetes/kube-proxy.conf
       # Copy the node specific kubelet systemd service unit over.
       IP_ADDS="$(ssh ${i} hostname -I)"
       read IPV4 IPV6 <<< "${IP_ADDS}"
       envsubst < ~/manifests/kubelet.service.tmpl | tee ${i}-kubelet.service
       sudo cat ${i}-kubelet.service | ssh ${i} sudo tee /etc/systemd/system/kubelet.service.d/kubelet.conf
       # Load the kubelet systemd unit
       ssh ${i} sudo systemctl daemon-reload
       # Restart the kubelet service.
       ssh ${i} sudo systemctl restart kubelet.service
   done
   ```

Next: [Post Installation Checks]

Back: [Manual Cluster Install]

---

[Manual Cluster Install]: /kubernetes/4.0-manual-cluster-install.md
[Post Installation Checks]: /kubernetes/6.0-post-installation-checks.md
