# Cluster Installation Overview

## Manual Cluster Installation

Get hands-on with each component of a cluster. By having you configure each
component you'll gain greater understanding of the overall cluster architecture.

Manually deploying a Kubernetes cluster is very beneficial as it can:
1. Help you learn where all the components are, and their corresponding
   configurations are located.
2. You'll likely mess-it-up, which is good because now you'll have a cluster
   that you can practice troubleshooting; which can be a great learning boost.
3. Grant you more knowledge to compliment any courses you have taken.
4. Speed up your ability to resolve issues.
5. Give you detailed insights to aid in your journey as a CKA.

### Checklist

1. Begin by preparing virtual machines for cluster installation by following
   the [Setup A Virtual Environment] guide.
2. [Install containerd: Manual Installation] as the CRI of choice on all
   machines.
3. Install the `kubectl` and `kubelet` packages on all machines.
4. Choose which IP CIDR ranges you want to use for IPv4 and/or IPv6 for the
   clusters' Pod and Service networks; or use the ranges provided.
5. [Generate Control Plane Certificates Manually] to set up cluster PKI.
6. [Generate Control Plane kubeconfigs Manually] for components and cluster
   admins.
7. [Generate Static Pod Manifests] for components:
   1. `etcd`
   2. `kube-apiserver`
   3. `kube-controller-manager`
   4. `kube-scheduler`
8. [Initialize the Control Plane] by starting the `kubelet` service on the
   `control-plane-01` node.
9. [Configure Networking] by deploying a `kube-proxy` [DaemonSet], CoreDNS, and
   Flannel CNI network addon on `control-plane-01` node.
10. [Add Workers] nodes to the cluster.

To take this path click the [Manual Cluster Install].

## Cluster Installation with kubeadm

This is how it is done in the real world. kubeadm automates all the tedious
setup of PKI, components, control-plane, nodes, and more.

This will do a lot of the heavily lifting for initial deployment and upgrading.

### Checklist

1. Prepare the machines for cluster installation by following the
   [Setup A Virtual Environment] guide, then return back here.
2. [Install containerd: Ubuntu Package Manager] as the CRI of choice on the
   control plane and nodes.
3. See instruction for [Installing kubeadm, kubelet and kubectl].
    * If you run into any issues see [Troubleshooting kubeadm].
4. Choose which IP CIDR ranges you want to use for IPv4 and/or IPv6 for the
   Pod and service networks.
5. Run `kubeadm init` with desired configuration to initialize component on the
   control-plane-01 machine.
6. [Installing Addons] (CNI compliant) to facilitate Pod Networking.
   NOTE: For brevity this guide shows how to install the `Flannel` add-on.
7. Run "kubeadm join..." command on each worker worker-01 and worker-02.

To take this path click the [kubeadm Cluster Install].

## Important Resources

These aid in comprehension of manual or tool assisted Kubernetes cluster
installations.

* [Cluster Architecture]
* [Download binaries / Images]
* [Cluster Networking]

---

[Install containerd: Ubuntu Package Manager]: /kubernetes/3.0-install-containerd.md#ubuntu-package-manager
[Setup A Virtual Environment]: /kubernetes/2.0-setup-a-virtual-environment.md
[Installing kubeadm, kubelet and kubectl]: https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/#installing-kubeadm-kubelet-and-kubectl
[Troubleshooting kubeadm]: https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/troubleshooting-kubeadm/
[Creating a cluster with kubeadm]: https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/
[Cluster Architecture]: https://kubernetes.io/docs/concepts/architecture/#kube-apiserver
[Download binaries / Images]: https://kubernetes.io/releases/download/
[Manual Cluster Install]: /kubernetes/4.0-manual-cluster-install.md
[kubeadm Cluster Install]: /kubernetes/5.0-kubeadm-cluster-install.md
[Installing Addons]: https://kubernetes.io/docs/concepts/cluster-administration/addons/#networking-and-network-policy
[Cluster Networking]: https://kubernetes.io/docs/concepts/cluster-administration/networking/
[Install containerd: Manual Installation]: /kubernetes/3.0-install-containerd.md#manual-installation
[DaemonSet]: /kubernetes/samples/kube-proxy.yaml.tmpl
[Generate Control Plane Certificates Manually]: /kubernetes/4.1-generate-control-plane-certificates-manually.md
[Generate Control Plane kubeconfigs Manually]: /kubernetes/4.2-generate-control-plane-kubeconfigs-manually.md
[Generate Static Pod Manifests]: /kubernetes/4.3-generate-static-pod-manifests.md
[Initialize the Control Plane]: /kubernetes/4.4-initialize-the-control-plane.md
[Configure Networking]: /kubernetes/4.5-configure-networking.md
[Add Workers]: /kubernetes/4.6-add-workers.md
